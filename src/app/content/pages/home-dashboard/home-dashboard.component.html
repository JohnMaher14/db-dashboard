<div class="" *ngIf="loading">
  <app-loading></app-loading>
</div>
<div class="row home-dashboard mb-3">
  <div class="col-xl-4 col-lg-6 col-12">
    <div class="card pull-up">
      <div class="card-content">
        <div class="card-body">
          <div class="media d-flex">
            <div class="media-body text-left">
              <h3 class="info">{{ caseStudyStatistics }}</h3>
              <h4>Case studies</h4>
            </div>
            <div>
              <i class="icon-users info font-large-2 float-right"></i>
            </div>
          </div>
          <div class="progress progress-sm mt-1 mb-0 box-shadow-2">
            <div
              class="progress-bar bg-gradient-x-info"
              role="progressbar"
              style="width: 80%"
              aria-valuenow="80"
              aria-valuemin="0"
              aria-valuemax="100"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-4 col-lg-6 col-12">
    <div class="card pull-up">
      <div class="card-content">
        <div class="card-body">
          <div class="media d-flex">
            <div class="media-body text-left">
              <h3 class="warning">{{  clientsStatistics }}</h3>
              <h4>Clients</h4>
            </div>
            <div>
              <i class="las la-user-tag warning font-large-2 float-right"></i>
            </div>
          </div>
          <div class="progress progress-sm mt-1 mb-0 box-shadow-2">
            <div
              class="progress-bar bg-gradient-x-warning"
              role="progressbar"
              style="width: 65%"
              aria-valuenow="65"
              aria-valuemin="0"
              aria-valuemax="100"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-4 col-lg-6 col-12">
    <div class="card pull-up">
      <div class="card-content">
        <div class="card-body">
          <div class="media d-flex">
            <div class="media-body text-left">
              <h3 class="success">{{ feedbacksStatistics }}</h3>
              <h4>Reviews</h4>
            </div>
            <div>
              <i class="icon-star success font-large-2 float-right"></i>
            </div>
          </div>
          <div class="progress progress-sm mt-1 mb-0 box-shadow-2">
            <div
              class="progress-bar bg-gradient-x-success"
              role="progressbar"
              style="width: 75%"
              aria-valuenow="75"
              aria-valuemin="0"
              aria-valuemax="100"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-lg-8">
    <div class="card">
      <div
        class="card-header bg-primary bg-darken-2 white align-items-center card-title-bold text-capitalize row no-gutters"
      >
          <div class="col-md-8 col-6">
            <h3 class="card-title">Users messages</h3>

          </div>
          <div class="col-md-4 col-6">
            <a routerLink="/messages" class="btn btn-light w-100" >View messages</a>
          </div>
      </div>
      <div class="card-content" style="max-height: 250px; overflow: auto">
        <div class="table-responsive">
          <table
            id="recent-orders"
            class="table table-hover table-striped mb-0"
          >
            <thead>
              <tr>
                <th class="border-top-0">#</th>
                <th class="border-top-0">Name</th>
                <th class="border-top-0">Date</th>
                <th class="border-top-0">View</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let message of clientMessages|slice:0:10">
                <td class="text-truncate">{{ message.id }}</td>
                <td class="text-truncate">{{ message.name }}</td>
                <td class="text-truncate">
                  {{ message.created_at | date: "medium" }}
                </td>
                <td class="text-truncate">
                  <button
                    type="button"
                    [attr.data-toggle]="'modal'"
                    [attr.data-target]="'#messageModal' + message.id"
                    class="btn btn-primary text-white"
                  >
                    <i class="la la-search" aria-hidden="true"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
          <!-- <div class="mt-2">
            <pagination-controls [maxSize]="5"  (pageChange)="page = $event" class="mt-3" ></pagination-controls>
          </div> -->
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card">
      <div class="card-content">
        <img
          class="image_card_home py-2"
          src="assets/images/welcome.png"
          alt="Card image cap"
        />
      </div>
    </div>
  </div>
</div>

<div
  *ngFor="let messageModal of clientMessages"
  class="modal fade"
  id="messageModal{{ messageModal.id }}"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
<div class="modal-dialog modal-dialog-centered">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title mb-0" id="exampleModalLabel">
        Message details
      </h5>
      <button
        type="button"
        class="close"
        data-dismiss="modal"
        aria-label="Close"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="card-body">
              <h4><i class="las la-address-card"></i> Name:</h4>
              <p>{{ messageModal.name  | slice:0:24 }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-body">
              <h4><i class="la la-at"></i> Email:</h4>
              <p>{{ messageModal.email | slice:0:20 }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-body">
              <h4><i class="las la-phone-volume"></i> Phone:</h4>
              <p>{{ messageModal.phone | slice:0:24 }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-body">
              <h4><i class="las la-calendar"></i> Date:</h4>
              <p>{{ messageModal.created_at  | slice:0:24 }}</p>
            </div>
          </div>
        </div>

        <div class="col-md-12">
          <div class="card">
            <div class="card-body">
              <h4><i class="las la-comments"></i> Message:</h4>
              <p>{{ messageModal.message }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
